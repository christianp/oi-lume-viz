# hexjson: { layout: string; hexes: Record<string, HexDefinition> };
# data?: Record<string, unknown>[];
# bgColour: string;
# scale: (value: number) => string;
# hexScale: number;
# labelProcessor: (label: string) => string;
# margin: number;
# matchKey?: string;
# popup: (params: Record<string, string | number>) => string;
# title?: string;
# titleProp: string;
# valueProp: string;
- title: "Hexes with defined colours"
  description: |
    A very simple hex cartogram. The default hex labels are applied (the first three characters of the name).
  config:
    hexjson:
      layout: odd-r
      hexes:
        E08000016: { n: Barnsley, colour: "#E6007C", q: 0, r: -2 }
        E08000032: { n: Bradford, colour: "#FF6700", q: -1, r: 0 }
        E08000033: { n: Calderdale, colour: "#0DBC37", q: -2, r: -1 }
        E07000163: { n: Craven, colour: "#178CFF", q: -2, r: 1 }
        E07000165: { n: Harrogate, colour: "#2f529f", q: -1, r: 1 }
        E08000034: { n: Kirklees, colour: "#722EA5", q: -1, r: -1 }
        E08000035: { n: Leeds, colour: "#F9BC26", q: 0, r: 0 }
        E07000169: { n: Selby, colour: "#1DD3A7", q: 1, r: 0 }
        E08000036: { n: Wakefield, colour: "#EF3AAB", q: 0, r: -1 }
        E06000014: { n: York, colour: "#F92626", q: 0, r: 1 }
    titleProp: n
    valueProp: colour
- title: "Hexes with defined colours - data and hexes separately"
  description: |
    This is the same as the previous example except we pass a <code>data</code> array which sets properties for each hex rather than set those in the <a href="https://open-innovations.org/projects/hexmaps/hexjson">HexJSON</a>. We use <code>matchKey</code> to match the key in <code>hexjson &rarr; hexes</code> with the required key in a <code>data</code> array item. We also customise the label for each hex to be the first letter.
  config:
    hexjson:
      layout: odd-r
      hexes:
        E08000016: { n: Barnsley, q: 0, r: -2 }
        E08000032: { n: Bradford, q: -1, r: 0 }
        E08000033: { n: Calderdale, q: -2, r: -1 }
        E07000163: { n: Craven, q: -2, r: 1 }
        E07000165: { n: Harrogate, q: -1, r: 1 }
        E08000034: { n: Kirklees, q: -1, r: -1 }
        E08000035: { n: Leeds, q: 0, r: 0 }
        E07000169: { n: Selby, q: 1, r: 0 }
        E08000036: { n: Wakefield, q: 0, r: -1 }
        E06000014: { n: York, q: 0, r: 1 }
    data:
      - { code: "E08000016", colour: "#E6007C" }
      - { code: "E08000032", colour: "#FF6700" }
      - { code: "E08000033", colour: "#0DBC37" }
      - { code: "E07000163", colour: "#178CFF" }
      - { code: "E07000165", colour: "#2f529f" }
      - { code: "E08000034", colour: "#722EA5" }
      - { code: "E08000035", colour: "#F9BC26" }
      - { code: "E07000169", colour: "#1DD3A7" }
      - { code: "E08000036", colour: "#EF3AAB" }
      - { code: "E06000014", colour: "#F92626" }
    matchKey: code
    titleProp: n
    label: "{{ n | slice(0,1) }}"
    valueProp: colour
- title: "Hexes coloured by a colour scale"
  description: "The same hex layout as above but this time we colour the hexes by a defined <code>scale</code> with an optional <code>min</code> and <code>max</code>. We also define a <code>legend</code> with 5 levels - three of the levels are given labels. We customise the <code>popup</code> label to make sure it includes a percentage sign."
  config:
    hexjson:
      layout: odd-r
      hexes:
        E08000016: { n: Barnsley, v: 1, q: 0, r: -2 }
        E08000032: { n: Bradford, v: 2, q: -1, r: 0 }
        E08000033: { n: Calderdale, v: 3, q: -2, r: -1 }
        E07000163: { n: Craven, v: 4, q: -2, r: 1 }
        E07000165: { n: Harrogate, v: 5, q: -1, r: 1 }
        E08000034: { n: Kirklees, v: 6, q: -1, r: -1 }
        E08000035: { n: Leeds, v: 7, q: 0, r: 0 }
        E07000169: { n: Selby, v: 8, q: 1, r: 0 }
        E08000036: { n: Wakefield, v: 9, q: 0, r: -1 }
        E06000014: { n: York, v: 10, q: 0, r: 1 }
    valueProp: v
    popup: "{{ n }}: {{ v }}%"
    scale: "rgb(122, 76, 139) 0%, rgb(124, 109, 168) 12.5%, rgb(115, 138, 177) 25%, rgb(107, 164, 178) 37.5%, rgb(104, 188, 170) 50%, rgb(133, 211, 146) 62.5%, rgb(189, 229, 97) 75%, rgb(254, 240, 65) 87.5%, rgb(254, 240, 65) 100%"
    min: 0
    max: 10
    legend:
      position: "top right"
      items:
        - value: 10
          label: "10%"
        - value: 7.5
          label: ''
        - value: 5
          label: '5%'
        - value: 2.5
          label: ''
        - value: 0
          label: '0%'
- title: Hexes with defined colours - external hexes
  description: |
    If you are using the same HexJSON layout in multiple places it makes sense not to have to repeat that layout every time. To help with this you can specify where the appropriate <code>hexjson</code> is.
  config:
    hexjson: hexjson.yorks
    data:
      - { code: "E08000016", colour: "#FF6700" }
      - { code: "E08000032", colour: "#F9BC26" }
      - { code: "E08000033", colour: "#F9BC26" }
      - { code: "E07000163", colour: "#1DD3A7" }
      - { code: "E07000165", colour: "#1DD3A7" }
      - { code: "E08000034", colour: "#F9BC26" }
      - { code: "E08000035", colour: "#F9BC26" }
      - { code: "E07000169", colour: "#1DD3A7" }
      - { code: "E08000036", colour: "#F9BC26" }
      - { code: "E06000014", colour: "#1DD3A7" }
    matchKey: code
    titleProp: n
    valueProp: colour
- title: Hexes with defined colours - external hexes and data
  description: |
    Similarly, you can specify where the <code>data</code> are stored rather that explicitly include them in the YAML.
  config:
    hexjson: hexjson.yorks
    data: test.data.hex_yorks
    matchKey: code
    titleProp: n
    valueProp: colour
- title: "Big map"
  description: |
    This is a large map showing local authorities coloured by region with a layout loaded from an external source. We provide a key with a title and an entry for each region. Each individual hex <code>label</code> is explicitly set to be an empty string.
  config:
    label: ""
    popup: "{{ n }}<br />{{ _id }}"
    legend:
      title: "Key"
      position: "top right"
      items:
        - value: "#FF6700"
          label: "East Anglia"
        - value: "#00B6FF"
          label: "East Midlands"
        - value: "#D73058"
          label: "London"
        - value: "#D60303"
          label: "North East"
        - value: "#1DD3A7"
          label: "North West"
        - value: "#722EA5"
          label: "Northern Ireland"
        - value: "#2254F4"
          label: "Scotland"
        - value: "#67E767"
          label: "South East"
        - value: "#178CFF"
          label: "South West"
        - value: "#F9BC26"
          label: "Yorkshire and the Humber"
        - value: "#0DBC37"
          label: "Wales"
        - value: "#E6007C"
          label: "West Midlands"
    hexjson: hexjson.localauthorities
    titleProp: n
    valueProp: colour

